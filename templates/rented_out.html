{% extends "base.html" %}

{% block title %}Rented Machines{% endblock %}

{% block content %}
<h1>Rented Machines</h1>

{% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
        {% for category, message in messages %}
            <div class="alert alert-{{ category }}">{{ message }}</div>
        {% endfor %}
    {% endif %}
{% endwith %}

<div class="mb-3 text-end">
    <a href="{{ url_for('add_machine_for_rent') }}" class="btn btn-primary">Add Machine for Rent</a>
    <a class="button" href="{{ url_for('index') }}">Back to Home</a>
</div>

<table>
    <thead>
        <tr>
            <th>Rental ID</th>
            <th>Machine Name</th>
            <th>Renter's Name</th>
            <th>Rent Date</th>
            <th>Return Date</th>
            <th>Construction Site</th>
            <th>Action</th>
        </tr>
    </thead>
    <tbody>
        {% for rental in rented_machines %}
        <tr>
            <td>{{ rental[0] }}</td>
            <td>{{ rental[1] }}</td>
            <td>{{ rental[2] }}</td>
            <td>{{ rental[3] }}</td>
            <td>{{ rental[4] }}</td>
            <td>{{ rental[5] }}</td>
            <td>
                <a href="{{ url_for('return_machine', rental_id=rental[0]) }}" class="btn btn-success">Return</a>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}